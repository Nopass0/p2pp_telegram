# Технологический стек проекта P2P Transactions Telegram Bot

## Основные технологии

- **Язык программирования**: TypeScript
- **Среда выполнения**: Bun (вместо Node.js)
- **Фреймворк для бота**: Telegraf.js
- **База данных**: PostgreSQL
- **ORM**: Prisma
- **Парсинг CSV**: csv-parse

## Архитектура проекта

### Слой интерфейса (Bot layer)
- `bot/index.ts` - инициализация бота и маршрутизация
- `bot/components` - компоненты пользовательского интерфейса (клавиатуры, меню)
- `bot/handlers` - обработчики команд и сообщений (разделены по функциональности)

### Сервисный слой (Services)
- `services/user-service.ts` - управление пользователями
- `services/admin-service.ts` - административные функции
- `services/work-session-service.ts` - управление рабочими сессиями
- `services/transaction-service.ts` - обработка и анализ транзакций
- `services/notification-service.ts` - управление уведомлениями
- `services/scheduler-service.ts` - планировщик заданий
- `services/prisma.ts` - единая точка доступа к ORM
- `services/csv-parser.ts` - обработка CSV-файлов

### Утилиты и вспомогательные модули
- `utils/message-formatter.ts` - форматирование сообщений
- `utils/csv-parser.ts` - специфичные функции для парсинга CSV
- `types/index.ts` - типы и интерфейсы для TypeScript

## Зависимости

### Основные пакеты
- `telegraf` - фреймворк для создания Telegram ботов
- `@prisma/client` - ORM для работы с базой данных
- `csv-parse` - библиотека для работы с CSV-файлами
- `dotenv` - управление переменными окружения
- `axios` - HTTP-клиент для запросов

### Инструменты разработки
- `typescript` - статическая типизация JavaScript
- `prisma` - управление схемой базы данных
- `@types/*` - типы для TypeScript

## Переменные окружения
- `BOT_TOKEN` - токен Telegram Bot API
- `DATABASE_URL` - URL для подключения к PostgreSQL
- `ADMIN_IDS` - идентификаторы администраторов (список через запятую)
- `PORT` - порт для веб-приложения (опционально)

## Особенности реализации
- Модульная архитектура с разделением ответственности
- Статическая типизация для предотвращения ошибок во время выполнения
- Использование ORM для безопасной работы с базой данных
- Применение миграций для контроля изменений в схеме базы данных
- Обработка ошибок с логированием для упрощения отладки
